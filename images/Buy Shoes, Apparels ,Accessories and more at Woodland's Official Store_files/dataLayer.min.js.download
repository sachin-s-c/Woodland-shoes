var $jscomp={scope:{},inherits:function(a,c){function b(){}b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a;for(var d in c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(c,d);e&&Object.defineProperty(a,d,e)}else a[d]=c[d]}},dataLayerHandler,DataLayerHandler=function(a){BindUiEvents.apply(this,arguments)};$jscomp.inherits(DataLayerHandler,BindUiEvents);DataLayerHandler.getInstance=function(){dataLayerHandler||(dataLayerHandler=new DataLayerHandler);return dataLayerHandler};
DataLayerHandler.prototype.bindUiEvents=function(){};DataLayerHandler.prototype.validateUtmSource=function(){var a=!1,c=(new Date).getTime();if(AppLocalStorage.get("UTMSOURCE")){var b=JSON.parse(AppLocalStorage.get("UTMSOURCE"));b.utm_source&&"icubeswire"==b.utm_source&&b.utm_date&&24>=(new Date(c)).getHours()-(new Date(b.utm_date)).getHours()&&(a=!0)}return a};
DataLayerHandler.prototype.initializeDataLayer=function(a,c){if(null==a){0<=viewPageName.indexOf("catalogue")&&(dataLayer.push({catalogueId:dfltClgId,catalogueName:dfltClgNm}),DataLayerHandler.getInstance().executeGA4eCommerce("view_promotion",null,null,null));if(0<=viewPageName.indexOf("category")){try{dataLayer.push({categoryId:categoryId,categoryName:categoryName})}catch(g){console.log(g)}try{null!=smartTechId&&void 0!=smartTechId&&smartech("dispatch","Category Viewed",{categoryname:categoryName})}catch(g){console.log(g)}}if(0<=
viewPageName.indexOf("listing")){try{dataLayer.push({searchKey:searchKey,categoryId:categoryId,categoryName:categoryCode,pageNumber:pageNumber,totalProducts:totalProducts}),DataLayerHandler.getInstance().executeGA4eCommerce("view_item_list",null,null,null)}catch(g){console.log(g)}try{null!=smartTechId&&void 0!=smartTechId&&(null!=searchKey&&void 0!=searchKey?smartech("dispatch","Product Search",{searchterm:searchKey}):smartech("dispatch","Category Viewed",{categoryname:categoryCode}))}catch(g){console.log(g)}}if(0<=
viewPageName.indexOf("product")){try{dataLayer.push({transactionProducts:[{sku:productBean.itemcode,name:productBean.productname,category:productBean.pcatname,mrp:productBean.mrp,price:productBean.price,quantity:"1",size:productBean.size,color:productBean.color,subcategory:productBean.catname}]}),DataLayerHandler.getInstance().executeGA4eCommerce("view_item",null,null,null)}catch(g){console.log(g)}try{if(null!=smartTechId&&void 0!=smartTechId&&productBean){var b=$("#anyErrorMsg").val()?"No":"Yes",
d=window.location.origin+productBean.url;null!=smartTechId&&void 0!=smartTechId&&smartech("dispatch","Product View",{items:[{prid:productBean.id,name:productBean.productname,brand:productBean.brandname,variant:productBean.itemcode,category:productBean.pcatname,price:productBean.price,prqt:1,currency:"INR",is_in_stock:b,image:productBean.image,producturl:d}]})}}catch(g){console.log(g)}}}if("cart"==a||0<=viewPageName.indexOf("checkout"))try{var e=CommonUtils.notEmpty(AppLocalStorage.get(CommonConstants.USER_CARTS))?
JSON.parse(AppLocalStorage.get(CommonConstants.USER_CARTS)):null,f=[],h=[],k=0,m=0,p=0,l=[];e&&0<e.length&&e.forEach(function(a,b){"CART"==a.cartType&&void 0!=a.items&&0<a.items.length&&a.items.forEach(function(a,b){l.push(a);var c=DataLayerHandler.getInstance().initCartItem(a,null),d=DataLayerHandler.getInstance().initCartItem(a,"st");Object.keys(a.variant).forEach(function(b){null==a.colorName&&"color"==b&&(c.color=a.variant[b].title,d.color=a.variant[b].title);null==a.size&&"size"==b&&(c.size=
a.variant[b].title,d.size=a.variant[b].title)});f.push(c);try{k+=a.price.itemPrice,m+=a.price.itemDiscount,p+=a.quantity,h.push(d)}catch(q){console.log(q)}})});f&&0<f.length&&dataLayer.push({transactionProducts:f});a&&"cart"==a&&(!c||"addToCart"!=c.button&&"buyNow"!=c.button||(DataLayerHandler.getInstance().executeGA4eCommerce("add_to_cart",a,c,l),"buyNow"==c.button&&DataLayerHandler.getInstance().executeGA4eCommerce("begin_checkout",a,c,l)),!c||"removeCartItem"!=c.button&&"updatecartitem"!=c.button||
DataLayerHandler.getInstance().executeGA4eCommerce("remove_from_cart",a,c,l));if(null!=smartTechId&&void 0!=smartTechId){try{null==a&&0<=viewPageName.indexOf("checkout")&&h&&0<h.length&&(b={},b.totalamount=k,b.subtotal=0,b.discount=m,b.total_items=p,b.currency="INR",b.items=h,smartech("dispatch","Checkout",b))}catch(g){console.log(g)}try{a&&"cart"==a&&c&&("addToCart"==c.button||"buyNow"==c.button||"removeCartItem"==c.button||"updatecartitem"==c.button)&&DataLayerHandler.getInstance().initStCartAction(c,
l)}catch(g){console.log(g)}}}catch(g){console.log(g)}if(0<=viewPageName.indexOf("thankyou"))if(null!=orderDataLayer&&void 0!=orderDataLayer)try{dataLayer.push(orderDataLayer);var n=[],f=orderDataLayer.transactionProducts;!f||null!=BOXX_PURCHASED_PRODUCT_PROPS&&0!=BOXX_PURCHASED_PRODUCT_PROPS.length||f.forEach(function(a,b){b=DataLayerHandler.getInstance().initStTrItem(a);BOXX_PURCHASED_PRODUCT_PROPS.push({productid:a.sku,msp:parseInt(a.price)});b&&null!=b.prid&&void 0!=b.prid&&b.prid!=a.sku&&n.push(b)});
if(n&&0<n.length){b={};b.orderid=orderDataLayer.transactionId;b.totalamount=parseInt(orderDataLayer.transactionTotal);b.totalprice=parseInt(orderDataLayer.transactionTotal);b.shippingfee=null!=orderDataLayer.transactionShipping?parseInt(orderDataLayer.transactionShipping):0;b.currency="INR";b.type="";b.items=n;try{null!=smartTechId&&void 0!=smartTechId&&smartech("dispatch","Product Purchase",b)}catch(g){console.log(g)}b.tax=orderDataLayer.transactionTax;b.affiliation=orderDataLayer.transactionAffiliation;
try{DataLayerHandler.getInstance().executeGA4eCommerce("purchase",a,c,b)}catch(g){console.log(g)}try{DataLayerHandler.getInstance().addPixelcodeurl("purchase",a,c,b)}catch(g){console.log(g)}}}catch(g){console.log(g)}else smartTechId&&null!=smartTechId&&null!=status_message&&void 0!=status_message&&smartech("dispatch","Purchase Failed",{paymentstatus:status_message})};
DataLayerHandler.prototype.initTrItem=function(a){var c={};try{a&&(c.prid=a.sku,c.name=a.name,c.brand=a.brand,c.sku=a.sku,c.variant=a.sku,c.color=a.color,c.category=a.category,c.price=parseInt(a.price),c.prqt=a.quantity,c.currency="INR",c.is_in_stock="Yes",c.image=a.image,c.producturl="")}catch(b){console.log(b)}return c};
DataLayerHandler.prototype.initStTrItem=function(a){var c=DataLayerHandler.getInstance().initTrItem(a);try{var b=CommonController.getInstance().initCartItemsHlpr(!1);null!=b&&0<b.length&&b.forEach(function(b,e){if(b.itemcode==a.sku){c.prid=b.productId;if(null==c.image||void 0==c.image)c.image=b.image;c.producturl=window.location.origin+context_Path+b.producturi+"/"+b.productId+"?color\x3d"+b.colorhl;c.uri=b.producturi;return!1}return!0})}catch(d){console.log(d)}return c};
DataLayerHandler.prototype.initCartItem=function(a,c){var b={};try{if(null!=a&&void 0!=a)if(c&&"str"==c){b.prid=a.productId;b.variant=a.itemcode;b.prqt=-a.quantity;b.image=a.image;var d=window.location.origin+context_Path+a.producturi+"/"+a.productId+"?color\x3d"+a.colorhl;b.producturl=d}else b.name=a.itemname,b.brand=a.brandname,b.category=a.prntcategoryname,b.subcategory=a.categoryname,b.mrp=parseInt(a.price.itemMrp),b.price=parseInt(a.price.itemPrice),b.size=a.size,b.color=a.colorName,c&&"st"==
c?(b.prid=a.productId,b.variant=a.itemcode,b.prqt=a.quantity,b.is_in_stock=a.inStock?"Yes":"No",b.currency="INR",b.image=a.image,d=window.location.origin+context_Path+a.producturi+"/"+a.productId+"?color\x3d"+a.colorhl,b.producturl=d):(b.productid=a.productId,b.sku=a.itemcode,b.quantity=a.quantity)}catch(e){console.log(e)}return b};
DataLayerHandler.prototype.initStCartAction=function(a,c){try{if(null!=smartTechId&&void 0!=smartTechId&&null!=a&&void 0!=a){if(c&&0<c.length&&("addToCart"==a.button||"buyNow"==a.button)&&a.actionId){var b=[];c.forEach(function(c,d){c.productId==a.actionId&&(0==a.isSize||a.size&&a.size==c.size)&&(0==a.isColor||a.color&&a.color==c.colorhl)&&b.push(c)});0<b.length&&smartech("dispatch","Add To Cart",DataLayerHandler.getInstance().initCartItem(b[0],"st"))}if("removeCartItem"==a.button&&a.actionId){var d=
[],e=CommonController.getInstance().inItOldCart(!1);e&&0<e.length&&(e.forEach(function(b,c){"CART"==b.cartType&&b.items&&0<b.items.length&&b.items.forEach(function(b,c){b.id==a.actionId&&d.push(b)})}),0<d.length&&smartech("dispatch","Remove From Cart",DataLayerHandler.getInstance().initCartItem(d[0],"str")))}"updatecartitem"==a.button&&a.actionId&&(e=CommonController.getInstance().inItOldCart(!1))}}catch(f){console.log(f)}};
DataLayerHandler.prototype.dataLayerLogin=function(a){try{var c=JSON.parse(AppLocalStorage.get(CommonConstants.CURRENT_USER));null!=smartTechId&&void 0!=smartTechId&&CommonHandler.isLogedIn()&&AppLocalStorage.get(CommonConstants.CURRENT_USER)&&null!=c&&smartech("contact","list id",{"pk^email":c.username},function(){smartech("identify",c.username);smartech("dispatch","Exiting User Login",{logindate:c.lastlogin,logintype:a})});CommonHandler.isLogedIn()&&AppLocalStorage.get(CommonConstants.CURRENT_USER)&&
null!=c&&dataLayer.push({login:c.username,logindate:c.lastlogin,logintype:a})}catch(b){console.log(b)}};
DataLayerHandler.prototype.dataLayerLoginGuest=function(a,c){if(CommonHandler.isLogedIn()&&AppLocalStorage.get(CommonConstants.CURRENT_USER)){var b=JSON.parse(AppLocalStorage.get(CommonConstants.CURRENT_USER));if(null!=b&&(dataLayer.push({login:b.username,logindate:b.lastlogin,logintype:"guest"}),null!=smartTechId&&void 0!=smartTechId))try{smartech("contact","list id",{"pk^email":b.username},function(){smartech("identify",b.username);smartech("dispatch","Guest User Login",{logindate:b.lastlogin,logintype:"Web"})})}catch(d){console.log(d)}}};
DataLayerHandler.prototype.dataLayerRegister=function(a,c){try{var b="Web";a&&a.source&&"web"!=a.source&&"Web"!=a.source&&(b="gGl"==a.source?"google":"Facebook");if(null!=smartTechId&&void 0!=smartTechId&&CommonHandler.isLogedIn()&&AppLocalStorage.get(CommonConstants.CURRENT_USER))if(c&&0<=c.indexOf("added")||a&&0==a.social){var d=JSON.parse(AppLocalStorage.get(CommonConstants.CURRENT_USER));null!=d&&(smartech("contact","list id",{"pk^email":d.username,mobile:"",NAME:d.fullName,SIGNUPDATE:d.createtime},
function(){smartech("identify",d.username);smartech("dispatch","New User Registration",{Source:b})}),dataLayer.push({registration:d.username,logindate:d.lastlogin,logintype:b}))}else DataLayerHandler.getInstance().dataLayerLogin(b);else CommonHandler.isLogedIn()&&AppLocalStorage.get(CommonConstants.CURRENT_USER)&&DataLayerHandler.getInstance().dataLayerLogin(b)}catch(e){console.log(e)}};
DataLayerHandler.prototype.dataLayerPayNow=function(a){try{if(null!=smartTechId&&void 0!=smartTechId&&CommonHandler.isLogedIn()){var c=CommonUtils.notEmpty(AppLocalStorage.get(CommonConstants.USER_CARTS))?JSON.parse(AppLocalStorage.get(CommonConstants.USER_CARTS)):null;if(c&&0<c.length){var b=0,d=0;c.forEach(function(a,c){"CART"==a.cartType&&void 0!=a.items&&0<a.items.length&&a.items.forEach(function(a,c){b+=a.price.itemPrice;d+=a.price.itemDiscount})});var c=[],e={};e.totalamount=b;e.subtotal=0;
e.discount=d;e.paymentmode="PMCC"==a||"PMNB"==a||"PMDC"==a||"PMWLT"==a?"ccavanue":"PMRP"==a?"razor pay":"PMCP"==a?"ecom wallet":"cod";e.currency="INR";c.push(e);smartech("dispatch","Pay Now",{items:c})}}}catch(f){console.log(f)}};DataLayerHandler.prototype.getUidGa4=function(){var a="";try{if(CommonHandler.isLogedIn()&&AppLocalStorage.get(CommonConstants.CURRENT_USER)){var c=JSON.parse(AppLocalStorage.get(CommonConstants.CURRENT_USER));null!=c&&c.username&&(a=c.username)}}catch(b){console.log(b)}return a};
DataLayerHandler.prototype.executeGA4eCommerce=function(a,c,b,d){dataLayer.push({ecommerce:null});"view_promotion"!=a&&"select_promotion"!=a||DataLayerHandler.getInstance().viewPromotionGa4(a,d);"view_item_list"!=a&&"select_item"!=a||DataLayerHandler.getInstance().viewSelectItemListGa4(a,d);"view_item"==a&&DataLayerHandler.getInstance().viewItemDetailsGa4(a,d);"add_to_cart"!=a&&"remove_from_cart"!=a||DataLayerHandler.getInstance().addRemoveToCartGa4(a,c,b,d);"begin_checkout"==a&&DataLayerHandler.getInstance().beginCheckoutGa4(a,
c,b,d);"purchase"==a&&DataLayerHandler.getInstance().purchaseGa4(a,c,b,d)};
DataLayerHandler.prototype.viewPromotionGa4=function(a,c){var b=[];try{if(promotions){var d={},e;for(e in promotions)d.prmkey=DataLayerHandler.getInstance().getPrmkeyDetails(e,null,null),d.prmkey&&8!=d.prmkey.sequence&&promotions[e].forEach(function(a){return function(d,f){if(null==c||c==d.id)d=DataLayerHandler.getInstance().getPrmkeyDetails(a.prmkey,d,f),b.push(d)}}(d)),d={prmkey:d.prmkey};b&&dataLayer.push({event:a,email:DataLayerHandler.getInstance().getUidGa4(),ecommerce:{items:b}})}}catch(f){console.log(f)}};
DataLayerHandler.prototype.getPrmkeyDetails=function(a,c,b){if(null==c){var d={};try{a.replace("SequenceDto{","").replace("}","").split(",").forEach(function(a,b){a=a.split("\x3d");d[a[0].trim()]=a[1].trim()})}catch(e){console.log(e)}return d}return{item_name:a.title,item_id:c.id,price:0,item_brand:"woodland",item_category:"woodland",item_category2:"",item_category3:"",item_category4:"",item_variant:"",promotion_id:a.id,promotion_name:a.title,creative_name:"",creative_slot:c.seq,location_id:a.label,
index:b,quantity:1}};
DataLayerHandler.prototype.viewSelectItemListGa4=function(a,c){var b=[];try{ga4products&&(ga4products.forEach(function(d,e){if(null==c||c==d.defaultItem.coloritemcode){var f={item_name:d.productname,item_id:d.id,price:d.defaultItem.defaultPrice.price,item_brand:d.brandname,item_variant:d.defaultItem.colorlbl,item_list_name:d.productname,item_list_id:d.defaultItem.itemcode,index:e,quantity:1};if("view_item_list"==a)f.item_category=sctsCode?sctsCode:"",f.item_category2=pctsCode?pctsCode:"",f.item_category3=
tctsCode?tctsCode:"",f.item_category4=fctsCode?fctsCode:"";else if(d=d.uri?d.uri.substring(0,d.uri.lastIndexOf("/")).split("/"):null,null!=d&&0<d.length){var h=d.length-1;d.forEach(function(a,b){b<h&&a&&(1==b&&(f.item_category=a),0==b&&(f.item_category2=a),2==b&&(f.item_category3=a),3==b&&(f.item_category4=a))})}b.push(f)}}),b&&dataLayer.push({event:a,email:DataLayerHandler.getInstance().getUidGa4(),ecommerce:{items:b}}))}catch(d){console.log(d)}};
DataLayerHandler.prototype.viewItemDetailsGa4=function(a,c){try{if(productBean){var b=productBean.uri?productBean.uri.substring(1,productBean.uri.lastIndexOf("/")).split("/"):null;c=[];c.push({item_name:productBean.productname,item_id:productBean.id,price:productBean.price,item_brand:productBean.brandname,item_category:null!=b&&1<b.length?b[1]:null!=b&&0<b.length?b[0]:"",item_category2:null!=b&&0<b.length?b[0]:"",item_category3:null!=b&&2<b.length?b[2]:"",item_category4:null!=b&&3<b.length?b[3]:"",
item_variant:productBean.color,item_list_name:productBean.productname,item_list_id:productBean.itemcode,index:1,quantity:1});c&&dataLayer.push({event:a,email:DataLayerHandler.getInstance().getUidGa4(),ecommerce:{items:c}})}}catch(d){console.log(d)}};
DataLayerHandler.prototype.addRemoveToCartGa4=function(a,c,b,d){try{if(null!=b&&void 0!=b){if(d&&0<d.length&&("addToCart"==b.button||"buyNow"==b.button)&&b.actionId){var e=[];d.forEach(function(a,c){a.productId==b.actionId&&(0==b.isSize||b.size&&b.size==a.size)&&(0==b.isColor||b.color&&b.color==a.colorhl)&&e.push(a)});if(0<e.length){var f=DataLayerHandler.getInstance().initCartItemGa4(a,e[0]);f&&(c=[],c.push(f),dataLayer.push({event:a,email:DataLayerHandler.getInstance().getUidGa4(),ecommerce:{items:c}}))}}if("removeCartItem"==
b.button&&b.actionId&&oldCartHlprGa4&&0<oldCartHlprGa4.length){var h=[];oldCartHlprGa4.forEach(function(a,c){"CART"==a.cartType&&a.items&&0<a.items.length&&a.items.forEach(function(a,c){a.id==b.actionId&&h.push(a)})});if(0<h.length){var k=DataLayerHandler.getInstance().initCartItemGa4(a,h[0]);k&&(f=[],f.push(k),dataLayer.push({event:a,email:DataLayerHandler.getInstance().getUidGa4(),ecommerce:{items:f}}))}}}oldCartHlprGa4=null}catch(m){console.log(m)}};
DataLayerHandler.prototype.initCartItemGa4=function(a,c){if(c){var b=c&&c.producturi?c.producturi.substring(1,c.producturi.lastIndexOf("/")).split("/"):null;c={item_name:c.itemname,item_id:c.productId,price:c.price.itemPrice,item_brand:c.brandname,item_category:null!=b&&1<b.length?b[1]:null!=b&&0<b.length?b[0]:"",item_variant:c.colorName,item_list_name:c.itemname,item_list_id:c.itemcode,index:1,quantity:c.quantity};if("add_to_cart"==a||"begin_checkout"==a)c.item_category2=null!=b&&0<b.length?b[0]:
"",c.item_category3=null!=b&&2<b.length?b[2]:"",c.item_category4=null!=b&&3<b.length?b[3]:"";return c}return null};DataLayerHandler.prototype.beginCheckoutGa4=function(a,c,b,d){try{if(d&&0<d.length){var e=[];d.forEach(function(b,c){b=DataLayerHandler.getInstance().initCartItemGa4(a,b);e.push(b)});e&&0<e.length&&dataLayer.push({event:a,email:DataLayerHandler.getInstance().getUidGa4(),ecommerce:{items:e}})}}catch(f){console.log(f)}};
DataLayerHandler.prototype.purchaseGa4=function(a,c,b,d){try{if(d){c={};c.transaction_id=d.orderid;c.affiliation=d.affiliation?d.affiliation:"woodland";c.value=d.totalamount;c.tax=d.tax?d.tax:"0.0";c.shipping=d.shippingfee?d.shippingfee:"0.0";c.currency=d.currency?d.currency:"INR";c.coupon="";var e=[];d.items.forEach(function(a,b){b=a&&a.uri?a.uri.substring(1,a.uri.lastIndexOf("/")).split("/"):null;var c={};c.item_name=a.name;c.item_id=a.prid;c.price=a.price;c.item_brand=a.brand;c.item_category=null!=
b&&1<b.length?b[1]:null!=b&&0<b.length?b[0]:a.category;c.item_variant=a.color;c.sku=a.sku;c.quantity=a.prqt;e.push(c)});c.items=e;c&&dataLayer.push({event:a,email:DataLayerHandler.getInstance().getUidGa4(),ecommerce:c})}}catch(f){console.log(f)}};
DataLayerHandler.prototype.addPixelcodeurl=function(a,c,b,d){if(DataLayerHandler.getInstance().validateUtmSource()){var e=0;d.items.forEach(function(a,b){e+=parseInt(a.prqt)});c=(a=d.items[0])&&a.uri?a.uri.substring(1,a.uri.lastIndexOf("/")).split("/"):null;$("\x3ciframe src\x3d'https://tracking.icubeswire.co/aff_a?offer_id\x3d1363\x26order_id\x3d"+d.orderid+"\x26product_name\x3d"+a.name+"\x26product_category\x3d"+(null!=c&&1<c.length?c[1]:null!=c&&0<c.length?c[0]:a.category)+"\x26sale_amount\x3d"+
d.totalamount+"\x26quantity\x3d"+e+"' width\x3d'1' height\x3d'1' id\x3d'pixelcodeurl' /\x3e\x3c/iframe\x3e").appendTo("head")}};
$(document).ready(function(){$(document).on("click",".HPGA4",function(a){a=$(this).attr("ga4id");DataLayerHandler.getInstance().executeGA4eCommerce("select_promotion",null,null,a);return!0});$(document).on("click",".LISTGA4",function(a){a=$(this).attr("ga4id");DataLayerHandler.getInstance().executeGA4eCommerce("select_item",null,null,a);return!0});$(document).on("click",".vcGa4 a",function(a){a=CommonUtils.notEmpty(AppLocalStorage.get(CommonConstants.USER_CARTS))?JSON.parse(AppLocalStorage.get(CommonConstants.USER_CARTS)):
null;var c=[];a&&0<a.length&&a.forEach(function(a,d){"CART"==a.cartType&&void 0!=a.items&&0<a.items.length&&a.items.forEach(function(a,b){c.push(a)})});c&&0<c.length&&DataLayerHandler.getInstance().executeGA4eCommerce("begin_checkout",null,null,c);return!0})});